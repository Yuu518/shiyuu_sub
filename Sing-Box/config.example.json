{
    "log": {
        "disabled": false,
        "level": "info",
        "output": "box.log",
        "timestamp": true
    },
    "dns": {
        "servers": [
            {
                "tag": "cloudflare",
                "address": "https://dns.cloudflare.com/dns-query",
                "address_resolver": "cloudflare_ip",
                "strategy": "prefer_ipv4", 
                "detour": "Proxy"
            },
            {
               "tag": "dnspod",
               "address": "119.29.29.29",
               "strategy": "prefer_ipv4",
               "detour": "Direct"
            },
            {
                "tag": "cloudflare_ip",
                "address": "1.0.0.1",
                "strategy": "prefer_ipv4",
                "detour": "Proxy"
             },
             {
                "tag": "fakedns",
                "address": "fakeip"
              }
 
        ],
        "rules": [
            {
               "outbound":[
                   "any"
                ],
               "server": "dnspod",
               "disable_cache": true
            },
            {
               "geosite": [
                   "cn"
                ],
                "server": "dnspod"
            },
            {
                "query_type": [
                  "A",
                  "AAAA"
                ],
                "server": "fakedns"
            }
        ],
        "fakeip": {
            "enabled": true,
            "inet4_range": "198.18.0.0/15",
            "inet6_range": "fc00::/18"
          }
    },
    "inbounds": [
    {
        "type": "tun",
        "tag": "SingBox",
        "inet4_address": "172.19.0.1/30",
        //"inet6_address": "fdfe:dcba:9876::1/126",
        "mtu": 9000,
        "auto_route": true,
        "strict_route": true,
        "stack": "system",
        "sniff": true
    }
        //{
        //    "type": "tproxy",
        //    "tag": "tproxy-in",
        //    "listen": "::",
        //    "listen_port": 1536,
        //    "sniff": true
        //}
    ],
    "proxyproviders": [
        {
            "tag": "Kuromis",
            "url": "",
            "cache_file": "./proxy_providers/Kuromis.cache",
            "force_update": "24h",
            "filter": {
            "rule": [
                "GB",
                "Traffic Reset",
                "Expire Date"
            ], 
            "white_mode": false
        },

            "custom_group": [
                {
                    "tag": "Kuromis·HK",
                    "type": "selector",
                    "rule": ["Hong Kong"],
                    "white_mode": true
                },
                {
                    "tag": "Kuromis·TW",
                    "type": "selector",
                    "rule": ["Taiwan"],
                    "white_mode": true
                },
                {
                    "tag": "Kuromis·Singapore",
                    "type": "selector",
                    "rule": ["Singapore"],
                    "white_mode": true
                },
                {
                    "tag": "Kuromis·JP",
                    "type": "selector",
                    "rule": ["Japan"],
                    "white_mode": true
                },
                {
                    "tag": "Kuromis·US",
                    "type": "selector",
                    "rule": ["United States"],
                    "white_mode": true
                }
            ]
        },
        {
            "tag": "Paoluz",
            "url": "",
            "cache_file": "./proxy_providers/Paoluz.cache", 
            "force_update": "24h", 
            "custom_group": [
                {
                    "tag": "Paoluz·HK",
                    "type": "selector",
                    "rule": ["香港"],
                    "white_mode": true
                },
                {
                    "tag": "Paoluz·TW",
                    "type": "selector",
                    "rule": ["台湾"],
                    "white_mode": true
                },
                {
                    "tag": "Paoluz·Singapore",
                    "type": "selector",
                    "rule": ["新加坡"],
                    "white_mode": true
                },
                {
                    "tag": "Paoluz·JP",
                    "type": "selector",
                    "rule": ["日本"],
                    "white_mode": true
                },
                {
                    "tag": "Paoluz·US",
                    "type": "selector",
                    "rule": ["美国"],
                    "white_mode": true
                }
            ]
        }
    ],
    "outbounds": [
        {
            "tag": "Proxy",
            "type": "selector",
            "outbounds": [
                "Kuromis·HK",
                "Kuromis·TW",
                "Kuromis·Singapore",
                "Kuromis·JP",
                "Kuromis·US",
                "Paoluz·HK",
                "Paoluz·TW",
                "Paoluz·Singapore",
                "Paoluz·JP",
                "Paoluz·US"
           ]
        },
        {
            "tag": "Telegram",
            "type": "selector",
            "outbounds": [
                "Proxy",
                "Kuromis·HK",
                "Kuromis·TW",
                "Kuromis·Singapore",
                "Kuromis·JP",
                "Kuromis·US",
                "Paoluz·HK",
                "Paoluz·TW",
                "Paoluz·Singapore",
                "Paoluz·JP",
                "Paoluz·US"
            ]
        },
        {
            "tag": "YouTube",
            "type": "selector",
            "outbounds": [
                "Proxy",
                "Kuromis·HK",
                "Kuromis·TW",
                "Kuromis·Singapore",
                "Kuromis·JP",
                "Kuromis·US",
                "Paoluz·HK",
                "Paoluz·TW",
                "Paoluz·Singapore",
                "Paoluz·JP",
                "Paoluz·US"
            ]
        },
        {
            "tag": "Netflix",
            "type": "selector",
            "outbounds": [
                "Proxy",
                "Kuromis·HK",
                "Kuromis·TW",
                "Kuromis·Singapore",
                "Kuromis·JP",
                "Kuromis·US",
                "Paoluz·HK",
                "Paoluz·TW",
                "Paoluz·Singapore",
                "Paoluz·JP",
                "Paoluz·US"
            ]
        },
        {
            "tag": "BiliBili",
            "type": "selector",
            "outbounds": [
                "Direct",
                "Kuromis·HK",
                "Kuromis·TW",
                "Paoluz·HK",
                "Paoluz·TW"
            ]
        },
        {
            "tag": "ChatGPT",
            "type": "selector",
            "outbounds": [
                "Kuromis·US",
                "Paoluz·US"
            ]
        },

        {
            "tag": "Bahamut",
            "type": "selector",
            "outbounds": [
                "Kuromis·TW",
                "Paoluz·TW"
            ]
        },
        {
            "type": "direct",
            "tag": "Direct"
        },
        {
            "type": "block",
            "tag": "Block"
        },
        {
            "type": "dns",
            "tag": "Dns-out"
        }
    ],
    "route": {
        "geoip": {
            "path": "geoip.db",
            "download_url": "https://github.com/lyc8503/sing-box-rules/releases/latest/download/geoip.db",
            "download_detour": "Proxy"
        },
        "geosite": {
            "path": "geosite.db",
            "download_url": "https://github.com/lyc8503/sing-box-rules/releases/latest/download/geosite.db",
            "download_detour": "Proxy"
        },
        "rules": [
            {
                "geoip": "private",
                "outbound": "Direct"
            },
            {
                "domain_keyword": [
                    "biligame",
                    "bilibiligame"
                ],
                "outbound": "Direct"
            },
            {
                "geosite": "telegram",
                "geoip": "telegram",
                "outbound": "Telegram"
            },
            {
                "geosite": "youtube",
                "geoip": "youtube",
                "outbound": "Proxy"
            },

            {
                "geosite": "netflix",
                "geoip": "netflix",
                "outbound": "Netflix"
            },
            {
                "geosite": "bilibili",
                "geoip": "bilibili",
                "outbound": "BiliBili"
            },
            {
                "geosite": "bahamut",
                "geoip": "bahamut",
                "outbound": "Bahamut"
            },
            {
                "geosite": "google",
                "geoip": "google",
                "outbound": "Proxy"
            },
            {
                "geosite": "microsoft",
                "geoip": "microsoft",
                "outbound": "Proxy"
            },
            {
                "geosite": "steam",
                "geoip": "steam",
                "outbound": "Proxy"
            },
            {
                "geosite": "openai",
                "geoip": "openai",
                "outbound": "ChatGPT"
            },
            {
                "protocol": "dns",
                "outbound": "Dns-out"
            },
            {
                "geosite": "cn",
                "outbound": "Direct"
            },
            {
                "geoip": "cn",
                "outbound": "Direct"
            }
        ],
        "final": "Proxy",
        "auto_detect_interface": true
    },
    "experimental": {
        "clash_api": {
            "external_controller": "[::]:9090",
            "external_ui_build_in": true,
            "external_ui": "./dashboard",
            "default_mode": "rule",
            "store_selected": true,
            "cache_file": "cache.db"
        }
    }
}
